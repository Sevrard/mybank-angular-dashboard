<div class="investment-page">

  <header class="investment-header">
    <h1>Investments</h1>
    <div class="header-actions">
      <div class="timeframes">
        @for (tf of timeframes; track tf) {
          <button
            type="button"
            [class.active]="activeTf === tf"
            (click)="setTimeframe(tf)">
            {{ tf }}
          </button>
        }
      </div>
      <div class="chart-types">
        <button
          type="button"
          [class.active]="activeChartType === 'line'"
          (click)="setChartType('line')">
          Line
        </button>
        <button
          type="button"
          [class.active]="activeChartType === 'area'"
          (click)="setChartType('area')">
          Area
        </button>
        <button
          type="button"
          [class.active]="activeChartType === 'candle'"
          (click)="setChartType('candle')">
          Candle
        </button>
      </div>
    </div>
  </header>

  <section class="metals-grid">
    @for (m of metals; track m.id) {
      <div class="metal-card" [class]="m.id">
        <h4>{{ m.name }} ({{ m.symbol }})</h4>
        @if (loading && !m.quote) {
          <span class="price loading">—</span>
          <span class="trend">—</span>
        } @else {
          <span class="price">{{ formatPrice(m.quote) }}</span>
          @if (formatTrend(m.quote); as trend) {
            <span class="trend" [class.positive]="isTrendPositive(m.quote)" [class.negative]="!isTrendPositive(m.quote)">{{ trend }}</span>
          } @else {
            <span class="trend">—</span>
          }
        }
      </div>
    }
  </section>

  <section class="charts-grid">

    <div class="chart-card">
      <div class="chart-header">
        <h3>Gold price</h3>
      </div>
      <app-metal-chart
        metal="gold"
        [timeframe]="activeTf"
        [chartType]="activeChartType"
        (quoteChange)="onQuote('gold', $event)">
      </app-metal-chart>
    </div>

    <div class="chart-card">
      <div class="chart-header">
        <h3>Silver price</h3>
      </div>
      <app-metal-chart
        metal="silver"
        [timeframe]="activeTf"
        [chartType]="activeChartType"
        (quoteChange)="onQuote('silver', $event)">
      </app-metal-chart>
    </div>

    <div class="chart-card">
      <div class="chart-header">
        <h3>Platinum price</h3>
      </div>
      <app-metal-chart
        metal="platinum"
        [timeframe]="activeTf"
        [chartType]="activeChartType"
        (quoteChange)="onQuote('platinum', $event)">
      </app-metal-chart>
    </div>

  </section>
</div>
